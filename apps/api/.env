# ==============================
# AppOps Hub â€“ API (NestJS)
# ==============================

NODE_ENV=development
PORT=3001

# ---------- Database ----------
# Central Postgres (Hub DB)
DATABASE_URL=postgresql://appops:appops@localhost:5432/appops_hub?schema=public

# ---------- Redis ----------
REDIS_URL=redis://localhost:6379

# ---------- Auth ----------
JWT_SECRET=change_me
JWT_EXPIRES_IN=7d


ADMIN_EMAIL=admin@appops.local
ADMIN_PASSWORD=admin123


# ---------- Ingestion Security ----------
# Replay window for HMAC (5 minutes)
INGESTION_REPLAY_WINDOW_MS=300000

# Nonce TTL in Redis (seconds)
INGESTION_NONCE_TTL_SECONDS=300

# Max events allowed per ingestion batch
INGESTION_MAX_BATCH=200

# ---------- Rate Limiting ----------
INGESTION_RATE_LIMIT_PER_SECOND=100
INGESTION_RATE_LIMIT_BURST=500

# ---------- Shopify Partner API ----------
# Used ONLY by Partner sync jobs
SHOPIFY_PARTNER_API_TOKEN=prtapi_3188e9030bbaeaafeb57c8233cc1e127
SHOPIFY_PARTNER_ORG_ID=1943073

# ---------- Logging ----------
LOG_LEVEL=debug

# ---------- Optional Email Provider (Campaign Engine) ----------
EMAIL_PROVIDER=ses
EMAIL_FROM_NAME=AppOps Hub
EMAIL_FROM_ADDRESS=no-reply@appops.local

# ---------- Feature Flags ----------
ENABLE_PARTNER_SYNC=true
ENABLE_APPDB_BACKFILL=true
